{"version":3,"file":"ggbt.min.js","sources":["../src/ggbt.js"],"sourcesContent":["/**\n * Javascript Controller to embed GGBApplet\n *\n * This class provides all the functionality for the new assign module.\n *\n * @author         Christoph Stadlbauer <christoph.stadlbauer@geogebra.org>\n * @copyright  (c) International GeoGebra Institute 2018\n * @license        http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n define(['jquery', 'https://www.geogebra.org/apps/deployggb.js'], function ($, GGBApplet) {\n    /**\n     * Created by Christoph on 25.08.19.\n     */\n    return {\n\n        init: function() {\n            window.GGBT = this;\n            window.ggbAppletOnLoad = function() {\n                $('input[name=\"ggbparameters\"]').val(JSON.stringify(window.applet1.getParameters()));\n                $('input[name=\"ggbviews\"]').val(JSON.stringify(window.applet1.getViews()));\n                $('input[name=\"ggbcodebaseversion\"]').val(window.applet1.getHTML5CodebaseVersion());\n\n                if (typeof (this.ggbcheckb) == \"undefined\") {\n\n                    var randomizedvar = document.getElementById('id_randomizedvar');\n                    if (!randomizedvar.value) {\n                        window.GGBT.getrandvars();\n                    }\n\n                    var i = 0;\n                    var answer = $('#id_answer_' + i);\n                    while (answer[0] !== undefined) {\n                        if (answer.val()) {\n                            answer.on('change focus', function(e) {\n                                e.preventDefault();\n                                window.GGBT.update_feedback($(e.target));\n                            });\n                            window.GGBT.update_feedback(answer);\n                        }\n                        answer = $('#id_answer_' + ++i);\n                    }\n                    document.querySelector('article').onkeypress = window.GGBT.checkEnter;\n                }\n                if (window.GGBT.usefile.checked) {\n                    document.getElementById('applet_container1').style.display = \"block\";\n                    document.getElementById('applet_options').style.display = \"flex\";\n                }\n            };\n\n            if ($('#applet_parameters')[0] !== undefined) {\n                this.ggbDataset = $('#applet_parameters')[0].dataset;\n                this.parameters = JSON.parse(this.ggbDataset.parameters);\n                this.views = this.ggbDataset.views;\n                window.applet1 = new GGBApplet(this.parameters, this.views, true);\n                // window.applet1.setHTML5Codebase(\"https://cdn.geogebra.org/apps/5.0.410.0/web3d\");\n                this.lang = this.ggbDataset.lang;\n            }\n\n            $('#id_loadapplet').on('click', function(e) {\n                e.preventDefault();\n                var id = $('#id_ggbturl').val().split(\"/\").pop();\n                if (id.indexOf(\"m\") == 0) {\n                    if (window.GGBT.isNumber(id.substr(1)) || (!window.GGBT.isNumber(id.substr(1)) && id.length > 8)) {\n                        id = id.substr(1);\n                    }\n                }\n                window.GGBT.injectapplet(id);\n            });\n\n            $('#id_getvars').on('click', function(e) {\n                e.preventDefault();\n                window.GGBT.getrandvars();\n            });\n\n            if (this.parameters) {\n                window.applet1.inject(\"applet_container1\", \"preferHTML5\");\n            }\n\n            this.ggbf = document.getElementById('id_ggbtheader');\n            this.usefile = document.getElementById(\"id_usefile\");\n\n            if (this.ggbf === null) { // In this case we are editing a submission.\n                this.ggbf = document.getElementById('id_submissiontypes');\n                this.ggbcheckb = document.getElementById('id_assignsubmission_geogebra_enabled');\n                if (this.ggbcheckb !== null) {\n                    this.ggbcheckb.addEventListener('change', this.handleggbdisable, false);\n                }\n            }\n\n            if (this.ggbf !== null) {\n                this.ggbf.addEventListener('dragenter', this.handleDragEnter, false);\n                this.ggbf.addEventListener('dragover', this.handleDragOver, false);\n                this.ggbf.addEventListener('dragleave', this.handleDragEndLeave, false);\n                this.ggbf.addEventListener('dragend', this.handleDragEndLeave, false);\n                this.ggbf.addEventListener('drop', this.handleDrop, false);\n                this.usefile.addEventListener('change', this.handleusefile, false);\n            }\n\n            if (this.usefile.checked) {\n                document.getElementById('applet_options').style.display = \"block\";\n            } else {\n                document.getElementById('applet_options').style.display = \"none\";\n            }\n            this.initoptions();\n        },\n\n        callback: function(params) {\n            var elementname = M.core_filepicker.instances[params['client_id']].options.elementname;\n            $('#id_' + elementname).val(params.url);\n            // inject applet to div layer\n            var id = (params.file).split(\".\")[0];\n            if (id.indexOf(\"m\") == 0) {\n                if (this.isNumber(id.substr(1)) || (!this.isNumber(id.substr(1)) && id.length > 8)) {\n                    id = id.substr(1);\n                }\n            }\n            this.injectapplet(id);\n        },\n\n        injectapplet: function(id) {\n            this.parameters = {\"material_id\": id};\n            this.parameters.language = this.lang;\n            this.parameters.moodle = \"editingQuestionOrSubmission\";\n            // Since we only support HTML5 this should work for js-code in the applet to get executed (ggboninit).\n            this.parameters.useBrowserForJS = false;\n\n            document.getElementById('applet_container1').style.display = \"block\";\n\n            window.applet1 = new GGBApplet(this.parameters, true);\n            // window.applet1.setHTML5Codebase(\"https://cdn.geogebra.org/apps/5.0.541.0/web3d\");\n\n            window.applet1.inject(\"applet_container1\", \"preferHTML5\");\n\n        },\n\n        getrandvars: function() {\n            var applet = document.ggbApplet;\n            if (typeof applet !== 'undefined') {\n                var objNumber = applet.getObjectNumber();\n                var randomizedvar = document.getElementById('id_randomizedvar');\n                var stringforrandomizedvars = \"\";\n                var i = 0;\n                for (var j = 0; j < objNumber; j++) {\n                    var strName = applet.getObjectName(j);\n                    if (applet.getObjectType(strName) == \"numeric\" && applet.isIndependent(strName)) {\n                        stringforrandomizedvars += strName + \",\";\n                    } else {\n                        var answer = $('#id_answer_' + i);\n                        if (applet.getObjectType(strName) == \"boolean\") {\n                            if (answer !== null && answer.length > 0) {\n                                if (!answer.val()) {\n                                    answer.val(strName);\n                                }\n                                this.update_feedback(answer);\n                                i++;\n                            }\n                        }\n                    }\n                    randomizedvar.value = stringforrandomizedvars;\n                }\n            }\n        },\n\n        update_feedback: function(answernode) {\n            var id = answernode.attr('id').split(\"_\").pop();\n            var varname = answernode.val();\n            if (!varname) {\n                // Should not happen, but make sure this function does not fail.\n                return;\n            }\n            var feedback = $('input[name=\"feedback[' + id + ']\"]');\n            var feedbackfromfile = $('#id_feedbackfromfile_' + id);\n            const parser = new DOMParser();\n            const xml = window.ggbApplet.getXML(varname);\n            if (!xml) {\n                // Should not happen, but make sure this function does not fail.\n                return;\n            }\n            const doc = parser.parseFromString(xml, \"text/xml\");\n            if (doc) {\n                var elem = doc.getElementsByTagName('caption');\n                var fbstring = '';\n                if (elem.length == 1) {\n                    fbstring = elem[0].getAttribute('val');\n                    feedback.val(fbstring);\n                } else if (elem.length > 1) {\n                    feedback.val('');\n                    fbstring = '';\n                } else {\n                    feedback.val('');\n                    //this is rather an error condition but should be checked by the server\n                    fbstring = 'Caption not set or variable name wrong.';\n                }\n                feedbackfromfile.val(fbstring);\n            }\n        },\n\n        checkEnter: function(e) {\n            e = e || event;\n            var txtArea = /textarea/i.test((e.target || e.srcElement).tagName);\n            return txtArea || (e.keyCode || e.which || e.charCode || 0) !== 13;\n        },\n\n        initoptions: function() {\n            this.enable_right_click = document.getElementById('enableRightClick');\n            this.enable_label_drags = document.getElementById('enableLabelDrags');\n            this.show_reset_icon = document.getElementById('showResetIcon');\n            this.enable_shift_drag_zoom = document.getElementById('enableShiftDragZoom');\n            this.show_algebra_input = document.getElementById('showAlgebraInput');\n            this.show_menu_bar = document.getElementById('showMenuBar');\n            this.show_tool_bar = document.getElementById('showToolBar');\n\n            if (typeof parameters !== 'undefined') {\n                this.enable_right_click.checked = this.parameters.enableRightClick;\n                this.enable_label_drags.checked = this.parameters.enableLabelDrags;\n                this.show_reset_icon.checked = this.parameters.showResetIcon;\n                this.enable_shift_drag_zoom.checked = this.parameters.enableShiftDragZoom;\n                this.show_algebra_input.checked = this.parameters.showAlgebraInput;\n                this.show_menu_bar.checked = this.parameters.showMenuBar;\n                this.show_tool_bar.checked = this.parameters.showToolBar;\n            }\n\n            this.enable_right_click.addEventListener('change', this.handlesettingschanged, false);\n            this.enable_label_drags.addEventListener('change', this.handlesettingschanged, false);\n            this.show_reset_icon.addEventListener('change', this.handlesettingschanged, false);\n            this.enable_shift_drag_zoom.addEventListener('change', this.handlesettingschanged, false);\n            this.show_algebra_input.addEventListener('change', this.handlesettingschanged, false);\n            this.show_menu_bar.addEventListener('change', this.handlesettingschanged, false);\n            this.show_tool_bar.addEventListener('change', this.handlesettingschanged, false);\n        },\n\n        handlesettingschanged: function(evt) {\n            window.GGBT.parameters[evt.target.id] = (evt.target.checked);\n            $('input[name=\"ggbparameters\"]').val(JSON.stringify(window.GGBT.parameters));\n            if (evt.target.id == \"showToolBar\" || evt.target.id == \"showMenuBar\" || evt.target.id == \"showAlgebraInput\") {\n                window.applet1 = new GGBApplet(window.GGBT.parameters, true);\n                // window.applet1.setHTML5Codebase(\"https://cdn.geogebra.org/apps/5.0.541.0/web3d\");\n                window.applet1.inject(\"applet_container1\", \"preferHTML5\");\n            } else {\n                window.ggbApplet[evt.target.id](evt.target.checked);\n            }\n        },\n\n        handleusefile: function() {\n            if (!window.GGBT.usefile.checked) {\n                document.getElementById('applet_container1').style.display = \"none\";\n                document.getElementById('applet_options').style.display = \"none\";\n            } else {\n                document.getElementById('id_ggbturl').value = \"\";\n                // document.getElementById('applet_container1').style.display = \"block\";\n            }\n        },\n\n        handleggbdisable: function() {\n            if (!window.GGBT.ggbcheckb.checked) {\n                document.getElementById('applet_container1').style.display = \"none\";\n                document.getElementById('applet_options').style.display = \"none\";\n                if (window.GGBT.usefile.checked) {\n                    window.GGBT.usefile.click();\n                }\n            } else {\n                document.getElementById('applet_container1').style.display = \"block\";\n            }\n        },\n\n        handleDragEnter: function() {\n            if (typeof (ggbcheckb) == \"undefined\" || window.GGBT.ggbcheckb.checked) {\n                window.GGBT.ggbf.classList.add('qtype-geogebra-hover');\n                document.getElementById('applet_container1').style.visibility = \"hidden\";\n            }\n        },\n\n        handleDragOver: function(e) {\n            if (typeof (window.GGBT.ggbcheckb) == \"undefined\" || window.GGBT.ggbcheckb.checked) {\n                if (e.preventDefault) {\n                    e.preventDefault();\n                }\n                window.GGBT.ggbf.classList.add('qtype-geogebra-hover');\n                document.getElementById('applet_container1').style.visibility = \"hidden\";\n                return false;\n            }\n        },\n\n        handleDragEndLeave: function() {\n            if (typeof (window.GGBT.ggbcheckb) == \"undefined\" || window.GGBT.ggbcheckb.checked) {\n                window.GGBT.ggbf.classList.remove('qtype-geogebra-hover');\n                document.getElementById('applet_container1').style.removeProperty(\"visibility\");\n            }\n        },\n\n        handleDrop: function(e) {\n            if (typeof (window.GGBT.ggbcheckb) == \"undefined\" || window.GGBT.ggbcheckb.checked) {\n                e.preventDefault();\n                e.stopPropagation();\n                var file = e.dataTransfer.files[0];\n                window.GGBT.ggbf.classList.remove('qtype-geogebra-hover');\n                document.getElementById('applet_container1').style.removeProperty(\"visibility\");\n                document.getElementById('applet_container1').style.display = \"block\";\n                document.getElementById('applet_options').style.display = \"flex\";\n                document.getElementById('applet_container1').style.height = \"100%\";\n                //document.getElementById('applet_container1').style.width = \"100%\";\n\n                document.getElementById('id_ggbturl').value = \"\";\n                //this.usefile = document.getElementById(\"id_usefile\");\n                if (!window.GGBT.usefile.checked) {\n                    window.GGBT.usefile.click();\n                }\n                var reader = new FileReader();\n                reader.onload = function(event) {\n                    var base64 = event.target.result.replace(\"data:application/vnd.geogebra.file;base64,\", \"\");\n                    window.GGBT.parameters = {\"ggbBase64\": base64};\n                    window.GGBT.parameters.enableRightClick = window.GGBT.enable_right_click.checked;\n                    window.GGBT.parameters.enableLabelDrags = window.GGBT.enable_label_drags.checked;\n                    window.GGBT.parameters.showResetIcon = window.GGBT.show_reset_icon.checked;\n                    window.GGBT.parameters.enableShiftDragZoom = window.GGBT.enable_shift_drag_zoom.checked;\n                    window.GGBT.parameters.showAlgebraInput = window.GGBT.show_algebra_input.checked;\n                    window.GGBT.parameters.showMenuBar = window.GGBT.show_menu_bar.checked;\n                    window.GGBT.parameters.showToolBar = window.GGBT.show_tool_bar.checked;\n                    window.GGBT.parameters.moodle = \"editingQuestionOrSubmission\";\n                    window.applet1 = new GGBApplet(window.GGBT.parameters, true);\n                    // window.applet1.setHTML5Codebase(\"https://cdn.geogebra.org/apps/5.0.541.0/web3d\");\n                    window.applet1.inject(\"applet_container1\");\n                };\n\n                reader.readAsDataURL(file);\n            }\n        },\n\n        isNumber: function(n) {\n            return !isNaN(parseFloat(n)) && isFinite(n);\n        }\n    };\n});\n"],"names":["define","$","GGBApplet","init","window","GGBT","this","ggbAppletOnLoad","val","JSON","stringify","applet1","getParameters","getViews","getHTML5CodebaseVersion","ggbcheckb","document","getElementById","value","getrandvars","i","answer","undefined","on","e","preventDefault","update_feedback","target","querySelector","onkeypress","checkEnter","usefile","checked","style","display","ggbDataset","dataset","parameters","parse","views","lang","id","split","pop","indexOf","isNumber","substr","length","injectapplet","inject","ggbf","addEventListener","handleggbdisable","handleDragEnter","handleDragOver","handleDragEndLeave","handleDrop","handleusefile","initoptions","callback","params","elementname","M","core_filepicker","instances","options","url","file","language","moodle","useBrowserForJS","applet","ggbApplet","objNumber","getObjectNumber","randomizedvar","stringforrandomizedvars","j","strName","getObjectName","getObjectType","isIndependent","answernode","attr","varname","feedback","feedbackfromfile","parser","DOMParser","xml","getXML","doc","parseFromString","elem","getElementsByTagName","fbstring","getAttribute","event","test","srcElement","tagName","keyCode","which","charCode","enable_right_click","enable_label_drags","show_reset_icon","enable_shift_drag_zoom","show_algebra_input","show_menu_bar","show_tool_bar","enableRightClick","enableLabelDrags","showResetIcon","enableShiftDragZoom","showAlgebraInput","showMenuBar","showToolBar","handlesettingschanged","evt","click","classList","add","visibility","remove","removeProperty","stopPropagation","dataTransfer","files","height","reader","FileReader","onload","base64","result","replace","readAsDataURL","n","isNaN","parseFloat","isFinite"],"mappings":"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"}