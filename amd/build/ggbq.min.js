function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(!a)return;if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,b)}function _arrayLikeToArray(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}function _iterableToArrayLimit(a,b){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(a)))return;var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&null!=g["return"])g["return"]()}finally{if(e)throw f}}return c}function _arrayWithHoles(a){if(Array.isArray(a))return a}define ("qtype_geogebra/ggbq",["jquery","//www.geogebra.org/apps/deployggb.js"],function(a,b){return{b64input:[],ggbBase64:[],xmlinput:[],ggbxml:[],currentvals:[],answerinput:[],responsevars:[],exerciseresultinput:[],qdiv:[],ggbDataset:[],init:function init(c){window.GGBQ=this;var d=document.getElementById(c).dataset,e=d.slot;window.ggbAppletOnLoad=function(a){if(-1!=a){document.querySelector("article").onkeydown=this.checkEnter;var b=a.substring(9),c=window[a],d=JSON.parse(window.GGBQ.currentvals[b]);for(var e in d){c.setValue(e,d[e])}window.GGBQ.b64input[b].val(c.getBase64());window.GGBQ.xmlinput[b].val(c.getXML());var f=c.startExercise();for(var g in f){window.GGBQ.qdiv[b].innerHTML=window.GGBQ.qdiv[b].innerHTML.replace("{"+g+"}",f[g])}window.GGBQ.qdiv[b].style.visibility="visible";if(""==window.GGBQ.answerinput[b].val()){var h="";window.GGBQ.responsevars[b].forEach(function(a){if(c.isDefined(a)){h+=c.getValue(a)}else{h+=0}});window.GGBQ.answerinput[b].val(h)}}};this.b64input[e]=a(document.getElementById(d.b64input));this.ggbBase64[e]=this.b64input[e].val();this.xmlinput[e]=a(document.getElementById(d.xmlinput));this.ggbxml[e]=this.xmlinput[e].val();this.qdiv[e]=a("#q"+e+" .qtext")[0];var f=JSON.parse(d.parameters);if(""!=this.ggbBase64[e]){f.ggbBase64=this.ggbBase64[e]}var g=f.height/f.width;if(0<g){f.width=a(".qtext").parent().width();f.height=f.width*g}this.ggbDatasetVars=JSON.parse(d.vars);f.language=d.lang;f.moodle="takingQuiz";delete f.material_id;f.id="ggbApplet"+e;var h=JSON.parse(d.views),i=new b(f,h,d.html5NoWebSimple);i.inject(d.div,"preferHTML5");a("#responseform").on("submit",this.getBase64andCheck);a(document.getElementById(d.div)).on("mouseleave",this.getBase64andCheck);this.currentvals[e]=d.vars;this.answerinput[e]=a(document.getElementById(d.answerinput));this.exerciseresultinput[e]=a(document.getElementById(d.exerciseresultinput));this.responsevars[e]=JSON.parse(d.responsevars)},checkEnter:function checkEnter(a){a=a||event;var b=/textarea/i.test((a.target||a.srcElement).tagName);return b||13!==(a.keyCode||a.which||a.charCode||0)},getBase64andCheck:function getBase64andCheck(){for(var a=0,b;a<window.GGBQ.answerinput.length;a++){b=window["ggbApplet"+a];if("undefined"!=typeof b){window.GGBQ.b64input[a].val(b.getBase64());window.GGBQ.xmlinput[a].val(b.getXML());for(var c=0,d=Object.entries(window.GGBQ.ggbDatasetVars);c<d.length;c++){var e=_slicedToArray(d[c],2),f=e[0],g=e[1];b.evalCommand("".concat(f,"=").concat(g))}for(var h="",k=0;k<window.GGBQ.responsevars[a].length;k++){if(b.isDefined(window.GGBQ.responsevars[a][k])){h+=b.getValue(window.GGBQ.responsevars[a][k])}else{h+=0}}window.GGBQ.answerinput[a].val(h);window.GGBQ.exerciseresultinput[a].val(JSON.stringify(b.getExerciseResult()))}}}}});
//# sourceMappingURL=ggbq.min.js.map
