function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(!a)return;if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,b)}function _arrayLikeToArray(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}function _iterableToArrayLimit(a,b){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(a)))return;var c=[],d=!0,e=!1,f=void 0;try{for(var g=a[Symbol.iterator](),h;!(d=(h=g.next()).done);d=!0){c.push(h.value);if(b&&c.length===b)break}}catch(a){e=!0;f=a}finally{try{if(!d&&null!=g["return"])g["return"]()}finally{if(e)throw f}}return c}function _arrayWithHoles(a){if(Array.isArray(a))return a}define ("qtype_geogebra/ggbq",["jquery","qtype_geogebra/deployggb"],function(a,b){var c=M.cfg.wwwroot+"/question/type/geogebra/js/geogebra-math-apps-bundle/GeoGebra/HTML5/5.0/web3d/",d={},e,f=function(){clearTimeout(e);e=setTimeout(function(){return Object.values(d).forEach(function(a){var b=document.getElementsByClassName(a)[0],c=window.getComputedStyle(b.querySelector(".qtext").parentElement.parentElement);b.style.width=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)+"px"})},250)};return{b64input:[],ggbBase64:[],xmlinput:[],ggbxml:[],currentvals:[],answerinput:[],responsevars:[],exerciseresultinput:[],qdiv:[],ggbDataset:[],init:function init(e){window.GGBQ=this;var g=document.getElementById(e).dataset,h=g.slot;d[h]=g.scalingcontainerclass;window.ggbAppletOnLoad=function(a){if(-1!=a){document.querySelector("article").onkeydown=this.checkEnter;var b=a.substring(9),c=window[a],d=JSON.parse(window.GGBQ.currentvals[b]);for(var e in d){c.setValue(e,d[e])}f();window.removeEventListener("resize",f);window.addEventListener("resize",f);window.GGBQ.b64input[b].val(c.getBase64());window.GGBQ.xmlinput[b].val(c.getXML());window.GGBQ.qdiv[b].style.visibility="visible";if(""==window.GGBQ.answerinput[b].val()){var g="";window.GGBQ.responsevars[b].forEach(function(a){if(c.isDefined(a)){g+=c.getValue(a)}else{g+=0}});window.GGBQ.answerinput[b].val(g)}}};this.b64input[h]=a(document.getElementById(g.b64input));this.ggbBase64[h]=this.b64input[h].val();this.xmlinput[h]=a(document.getElementById(g.xmlinput));this.ggbxml[h]=this.xmlinput[h].val();this.qdiv[h]=a("#q"+h+" .qtext")[0];var i=JSON.parse(g.parameters);if(""!=this.ggbBase64[h]){i.ggbBase64=this.ggbBase64[h]}if(!g.forcedimensions||"0"===g.forcedimensions){i.scaleContainerClass=d[h];i.autoHeight=!0}else{i.width=g.width;i.height=g.height;var l=document.getElementsByClassName(d[h])[0];if(l){l.style.overflowX="auto";l.style.overflowY="hidden"}}this.ggbDatasetVars=JSON.parse(g.vars);i.language=g.lang;i.moodle="takingQuiz";delete i.material_id;i.id="ggbApplet"+h;var j=JSON.parse(g.views),k=new b(i,j,g.html5NoWebSimple);k.setHTML5Codebase(c);k.inject(g.div,"preferHTML5");a("#responseform").on("submit",this.getBase64andCheck);a(document.getElementById(g.div)).on("mouseleave",this.getBase64andCheck);this.currentvals[h]=g.vars;this.answerinput[h]=a(document.getElementById(g.answerinput));this.exerciseresultinput[h]=a(document.getElementById(g.exerciseresultinput));this.responsevars[h]=JSON.parse(g.responsevars)},checkEnter:function checkEnter(a){a=a||event;var b=/textarea/i.test((a.target||a.srcElement).tagName);return b||13!==(a.keyCode||a.which||a.charCode||0)},getBase64andCheck:function getBase64andCheck(){for(var a=0,b;a<window.GGBQ.answerinput.length;a++){b=window["ggbApplet"+a];if("undefined"!=typeof b){window.GGBQ.b64input[a].val(b.getBase64());window.GGBQ.xmlinput[a].val(b.getXML());for(var c=0,d=Object.entries(window.GGBQ.ggbDatasetVars);c<d.length;c++){var e=_slicedToArray(d[c],2),f=e[0],g=e[1];b.evalCommand("".concat(f,"=").concat(g))}for(var h="",k=0;k<window.GGBQ.responsevars[a].length;k++){if(b.isDefined(window.GGBQ.responsevars[a][k])){h+=b.getValue(window.GGBQ.responsevars[a][k])}else{h+=0}}window.GGBQ.answerinput[a].val(h)}}}}});
//# sourceMappingURL=ggbq.min.js.map
